<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 3 - Socket Programming | CN Lab Helper</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    <style>
        .lab-detail {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 3rem;
        }

        .lab-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .lab-detail-header h2 {
            color: var(--primary);
        }

        .lab-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .lab-explanation {
            padding-right: 1rem;
        }

        .lab-explanation h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            margin-top: 2rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }

        .lab-explanation h3:first-child {
            margin-top: 0;
        }

        .lab-explanation p {
            margin-bottom: 1.5rem;
        }

        .lab-explanation ul {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        .lab-explanation li {
            margin: 0.5rem 0;
        }

        .pdf-container {
            margin: 1.5rem 0;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 1rem;
            background: #f9f9f9;
        }

        .pdf-container h4 {
            margin-bottom: 0.8rem;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .pdf-placeholder {
            width: 100%;
            height: 400px;
            background-color: #e9ecef;
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #6c757d;
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
        }

        .code-block {
            position: relative;
            background-color: #1e1e1e;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            border-left: 5px solid var(--primary);
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background 0.3s;
        }

        .copy-btn:hover {
            background-color: rgba(52, 152, 219, 0.8);
        }

        .code-explanation {
            background-color: #f9f9f9;
            padding: 0.8rem 1rem;
            border-left: 4px solid var(--primary);
            border-radius: 5px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        /* Configuration Steps */
        .config-steps {
            margin: 1.5rem 0;
            padding-left: 2rem;
            line-height: 1.6;
        }

        .config-steps li {
            margin-bottom: 0.8rem;
            padding-left: 0.5rem;
        }

        /* PDF Viewers */
        #pdf-viewer-1 {
            width: 100%;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .mobile-pdf {
            width: 100%;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: none;
        }

        /* MOBILE RESPONSIVENESS */
        @media (max-width: 768px) {
            .lab-detail {
                padding: 1.5rem;
            }
            
            .lab-detail-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .lab-content {
                display: block;
                gap: 1rem;
            }

            .lab-explanation {
                padding-right: 0;
            }

            #pdf-viewer-1 {
                height: 400px;
            }

            .mobile-pdf {
                height: 400px;
            }

            .pdf-container {
                padding: 0.8rem;
                margin: 1rem 0;
            }

            .pdf-placeholder {
                height: 300px;
            }
            
            .lab-explanation ul {
                padding-left: 1.5rem;
            }
            
            .lab-explanation h3 {
                margin-top: 1.5rem;
            }
            
            .code-block {
                padding: 0.8rem;
            }
            
            .code-explanation {
                padding: 0.6rem 0.8rem;
                font-size: 0.85rem;
            }
            
            .config-steps {
                margin: 1rem 0;
                padding-left: 1.5rem;
            }
            
            .config-steps li {
                margin-bottom: 0.6rem;
                padding-left: 0.3rem;
            }
        }

        @media (max-width: 480px) {
            .lab-detail {
                padding: 1rem;
            }
            
            #pdf-viewer-1 {
                height: 350px;
            }
            
            .mobile-pdf {
                height: 350px;
            }
            
            .pdf-placeholder {
                height: 250px;
            }
            
            .code-block {
                padding: 0.6rem;
            }
            
            .copy-btn {
                padding: 4px 8px;
                font-size: 0.75rem;
            }
            
            .config-steps li {
                margin-bottom: 0.5rem;
            }
            
            .lab-explanation p {
                margin-bottom: 1rem;
            }
            
            .lab-explanation ul {
                padding-left: 1.2rem;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="container">
            <div class="header-content">
               <div class="logo">
                <img src="images/logo2.png" alt="CN Lab Helper Logo" style="height:70px; width:auto;">
                    <h1>NetLabPro</h1>
                </div>
                <nav class="navbar">
                    <button class="hamburger" id="hamburger" onclick="toggleMobileNav()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <ul class="nav-links" id="navLinks">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="Netplay.html">NetPlay</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <section class="container">
        <div class="lab-detail">
            <div class="lab-detail-header">
                <h2>Lab 3: Socket Programming</h2>
                <a href="index.html" class="btn">Back to Labs</a>
            </div>
            <div class="lab-content">
                <div class="lab-explanation">
                    <h3>1. Lab Introduction</h3>
                    <p>Socket programming allows two programs to communicate over a network. Python provides the
                        <code>socket</code> module to implement TCP/IP and UDP protocols. This lab demonstrates multiple
                        client-server programs including chat, file transfer, arithmetic server, grading server,
                        hostname
                        resolution, and port scanning.
                    </p>

                    <h3>2. TCP Connection Process</h3>
                    <p>Python also has libraries that provide higher-level access to application-level network
                        protocols,
                        such as FTP, HTTP, etc. TCP connection steps:</p>
                    <ol class="config-steps">
                        <li><strong>STEP I: </strong>Server instantiates a ServerSocket with a port number.</li>
                        <li><strong>STEP II: </strong>Server calls accept() to wait for a client connection.</li>
                        <li><strong>STEP III: </strong>Client instantiates a Socket specifying server address and port.</li>
                        <li><strong>STEP IV: </strong>Socket attempts to connect to the server. If successful, a Socket
                            object is ready.</li>
                        <li><strong>STEP V: </strong>Server accept() returns a socket connected to the client.</li>
                    </ol>
                    <p>Data can now be sent bidirectionally using <code>send</code>/<code>recv</code>.</p>

                    <h3>3. Important Socket Terms</h3>
                    <ul class="config-steps">
                        <li><strong>Domain:</strong> Protocol family (AF_INET, PF_UNIX, etc.)</li>
                        <li><strong>Type:</strong> Communication type: SOCK_STREAM (TCP) or SOCK_DGRAM (UDP)</li>
                        <li><strong>Protocol:</strong> Usually 0, identifies protocol variant</li>
                        <li><strong>Hostname:</strong> Network interface identifier</li>
                    </ul>

                    <h3>4. Additional Python Socket Programs</h3>
                    <p>Examples with server and corresponding client code:</p>

                    <!-- Example 1: Basic TCP Server + Client -->
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# TCP Server
import socket
s = socket.socket()
s.bind(('localhost', 9999))
s.listen(3)
print("Server hostname:", socket.gethostname())
while True:
    c, addr = s.accept()
    print("Connected with", addr)
    c.send(b"Welcome!\n")
    c.close()
</code></pre>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# TCP Client
import socket
c = socket.socket()
c.connect(('localhost', 9999))
msg = c.recv(1024)
print(msg.decode())
c.close()
</code></pre>
                    </div>
                    <div class="code-explanation">Simple TCP server sends a welcome message; client receives it.</div>

                    <!-- Example 2: Hostname Resolution -->
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# Server not needed; client resolves hostnames
import socket
hosts = ['www.google.com', 'www.facebook.com']
for h in hosts:
    print(f"{h}: {socket.gethostbyname(h)}")
</code></pre>
                    </div>
                    <div class="code-explanation">Client resolves multiple hostnames using <code>gethostbyname()</code>.
                    </div>

                    <!-- Example 3: Arithmetic Server + Client -->
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# Arithmetic TCP Server
import socket
s = socket.socket()
s.bind(('localhost', 9998))
s.listen(1)
c, addr = s.accept()
data = c.recv(1024).decode()
num1, num2, op = data.split()
num1, num2 = float(num1), float(num2)
ans = 0
if op == '+': ans = num1 + num2
elif op == '-': ans = num1 - num2
elif op == '*': ans = num1 * num2
elif op == '/': ans = num1 / num2
c.send(str(ans).encode())
c.close()
s.close()
</code></pre>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# Arithmetic TCP Client
import socket
c = socket.socket()
c.connect(('localhost', 9998))
msg = input("Enter operation (e.g., 5 2 +): ")
c.send(msg.encode())
result = c.recv(1024).decode()
print("Result:", result)
c.close()
</code></pre>
                    </div>
                    <div class="code-explanation">
                        <b>Question:</b> Create a TCP-based Arithmetic Server and Client where the client sends two
                        numbers and an operator, and the server returns the result.<br>
                        <b>Explanation:</b> The server performs basic arithmetic operations (+, -, *, /) on numbers
                        received from the client and returns the calculated result.
                    </div>


                    <!-- Example 4: Grading Server + Client -->
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# Grading TCP Server
import socket
grades = [(4.33,"A+","Excellent"),(4.0,"A","Excellent"),(3.66,"A-","Very good")]
s=socket.socket()
s.bind(('localhost',9997))
s.listen(1)
c, addr=s.accept()
gp=float(c.recv(1024).decode())
for g, l, q in grades:
    if gp>=g:
        c.send(f"{l} ({q})".encode())
        break
c.close() 
s.close()
</code></pre>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# Grading TCP Client
import socket
c=socket.socket()
c.connect(('localhost',9997))
gp=input("Enter GPA: ")
c.send(gp.encode())
grade=c.recv(1024).decode()
print("Grade:", grade)
c.close()
</code></pre>
                    </div>
                    <div class="code-explanation">
                        <b>Question:</b> Build a TCP Grading Server and Client where the client sends a GPA value, and
                        the server responds with the corresponding letter grade and remark.<br>
                        <b>Explanation:</b> The server compares the GPA with predefined grade boundaries and returns a
                        message like "A (Excellent)" or "A- (Very Good)."
                    </div>

                    <!-- Example 5: File Transfer TCP -->
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# File Receiver Server
import socket
s=socket.socket()
s.bind(('localhost',9995))
s.listen(1)
c, addr = s.accept()
filename=c.recv(1024).decode()
with open("recv_"+filename,'wb') as f:
    while True:
        data=c.recv(1024)
        if not data: 
        break
        f.write(data)
c.close()
s.close()
</code></pre>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# File Sender Client
import socket
import os
c=socket.socket()
c.connect(('localhost',9995))
filename=input("File to send: ")
c.send(filename.encode())
with open(filename,'rb') as f:
    data=f.read(1024)
    while data:
        c.send(data)
        data=f.read(1024)
c.close()
</code></pre>
                    </div>
                    <div class="code-explanation">
                        <b>Question:</b> Implement a TCP-based File Transfer system where the client sends a file to the
                        server.<br>
                        <b>Explanation:</b> The client reads a file and transmits its contents to the server in chunks
                        of 1024 bytes. The server receives and stores the file with a "recv_" prefix.
                    </div>
                    <!-- Example 6: Chat + File Transfer Server + Client -->
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# Chat + File Server
import socket, os
s=socket.socket()
s.bind(('localhost',9999))
s.listen(1)
c, addr=s.accept()
while True:
    choice=c.recv(1024).decode()
    if choice=='1':
        msg=c.recv(1024).decode()
        if msg.lower()=='exit': break
        print("Client:",msg)
        reply=input("You: ")
        c.send(reply.encode())
    elif choice=='2':
        filename=c.recv(1024).decode()
        with open("recv_"+filename,'wb') as f:
            while True:
                data=c.recv(1024)
                if not data: 
                break
                f.write(data)
        break
    else: 
    break
c.close() 
s.close()
</code></pre>
                    </div>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <pre><code class="language-python">
# Chat + File Client
import socket, os
c=socket.socket()
c.connect(('localhost',9999))
choice=input("1=Chat, 2=Send File: ")
c.send(choice.encode())
if choice=='1':
    while True:
        msg=input("You: ")
        c.send(msg.encode())
        if msg.lower()=='exit': break
        reply=c.recv(1024).decode()
        print("Server:",reply)
elif choice=='2':
    filename=input("File to send: ")
    c.send(filename.encode())
    with open(filename,'rb') as f:
        data=f.read(1024)
        while data:
            c.send(data)
            data=f.read(1024)
c.close()
</code></pre>
                    </div>
                    <div class="code-explanation">
                        <b>Question:</b> Combine chat and file transfer functionalities into a single TCP program where
                        users can choose to either chat or send a file.<br>
                        <b>Explanation:</b> The client first selects whether to start a chat session or send a file.
                        Depending on the choice, the server either exchanges chat messages or receives a file.
                    </div>

                    <h3>5. Lab Resources</h3>
                    <div class="pdf-container">
                        <h4>Lab 3 Task PDF</h4>
                        <!-- Desktop PDF embed -->
                        <div id="pdf-viewer-1" class="desktop-pdf"></div>
                        <!-- Mobile PDF iframe -->
                        <iframe 
                            class="mobile-pdf" 
                            src="pdfs/Lab_03_Task.pdf" 
                            frameborder="0">
                        </iframe>
                        <a href="pdfs/Lab_03_Task.pdf" class="btn" target="_blank">Download PDF</a>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js"></script>
    <script>
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        if (!isMobile()) {
            PDFObject.embed("pdfs/Lab_03_Task.pdf#zoom=page-width", "#pdf-viewer-1");
        } else {
            document.querySelectorAll('.desktop-pdf').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.mobile-pdf').forEach(el => el.style.display = 'block');
        }

        function copyCode(button) {
            try {
                const codeBlock = button.nextElementSibling.querySelector('code');
                const text = codeBlock.innerText || codeBlock.textContent || '';
                navigator.clipboard.writeText(text).then(() => {
                    const original = button.innerText;
                    button.innerText = 'Copied!';
                    setTimeout(() => {
                        button.innerText = original;
                    }, 1500);
                }).catch((err) => {
                    console.error('Copy failed', err);
                    alert('Copy failed â€” please select and copy manually.');
                });
            } catch (e) {
                console.error(e);
                alert('Unable to copy code block.');
            }
        }
    </script>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About CN Lab Helper</h3>
                    <p>An interactive platform to help students visualize and understand Computer Networks laboratory
                        experiments through detailed explanations, screenshots, and animations.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <p><a href="index.html">Home</a></p>
                    <p><a href="Netplay.html">NetPlay</a></p>
                    <p><a href="about.html">About</a></p>
                </div>
                <div class="footer-section">
                    <h3>Connect With Us</h3>
                    <div class="social-links">
                        <a href="https://linkedin.com/in/kinza-afzal7-" target="_blank"><i
                                class="fab fa-linkedin"></i></a>
                        <a href="https://github.com/kinza7124" target="_blank"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 CN Lab Helper created by Kinza. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile Navigation Toggle
        function toggleMobileNav() {
            const navLinks = document.getElementById('navLinks');
            const hamburger = document.getElementById('hamburger');
            navLinks.classList.toggle('active');
            const icon = hamburger.querySelector('i');
            if (navLinks.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }

        // Close mobile nav when clicking outside
        document.addEventListener('click', (e) => {
            const navLinks = document.getElementById('navLinks');
            const hamburger = document.getElementById('hamburger');
            if (navLinks && !navLinks.contains(e.target) && hamburger && !hamburger.contains(e.target)) {
                navLinks.classList.remove('active');
                if (hamburger) {
                    const icon = hamburger.querySelector('i');
                    if (icon) {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                }
            }
        });
    </script>
</body>
</html>
